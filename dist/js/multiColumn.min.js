function buildColumn(i){if(html="",tmp=i.split("_"),columnNumber=parseInt(tmp[0],10)-1,tmpColumn!=columnNumber){tmpColumn=columnNumber;var e=$(window).innerHeight()+$(window).scrollTop();return $("#gallery").css("height",columnHeight[columnNumber]),$(".images").remove(),jQuery.each(requestResult[i],function(i,t){return"object"!=typeof t||null===t?!1:void(t.posY<=e?html+='<a class="images" href="'+t.imgPath+'" title="'+t.imgName+'"><img class="images" style="position:absolute; top:'+t.posY+"px; left:"+t.posX+"px; height:"+t.height+"px; width:"+t.width+'px; visibility:visible; " src="'+t.thumbPath+'" height="'+t.height+'" width="'+t.width+'"></a>':t.posY<=e+300&&t.posY<=e+900&&(html+='<a class="images" href="'+t.imgPath+'" title="'+t.imgName+'"><img class="images" style="position:absolute; top:'+t.posY+"px; left:"+t.posX+"px; height:"+t.height+"px; width:"+t.width+'px; visibility:hidden; " src="'+t.thumbPath+'" height="'+t.height+'" width="'+t.width+'"></a>'))}),void $("#gallery").append(html)}}function addImgToColumn(i,e){html="",jQuery.each(requestResult[i],function(i,t){if("object"==typeof t&&null!==t&&t.id>imgId&&t.id-imgId<=1)if("1_Columns"==activeColumn&&t.posY<=e+300)html+='<a class="images" href="'+t.imgPath+'" title="'+t.imgName+'"><img class="images" style="position:absolute; top:'+t.posY+"px; left:"+t.posX+"px; height:"+t.height+"px; width:"+t.width+'px; visibility:hidden; " src="'+t.thumbPath+'" height="'+t.height+'" width="'+t.width+'"></a>',imgId=t.id;else{if(!(t.posY<=e+900))return;html+='<a class="images" href="'+t.imgPath+'" title="'+t.imgName+'"><img class="images" style="position:absolute; top:'+t.posY+"px; left:"+t.posX+"px; height:"+t.height+"px; width:"+t.width+'px; visibility:hidden; " src="'+t.thumbPath+'" height="'+t.height+'" width="'+t.width+'"></a>',imgId=t.id}}),$("#gallery").append(html)}function refreshScreenOnScroll(i){var e=innerWinHeight+$(window).scrollTop();$(".images").each(function(){var t=parseInt($(this).css("top"),10),s=$(this).css("visibility");e-i>=t&&"NaN"!=t&&"hidden"==s&&("yes"==fadeIn?$(this).css({opacity:0,visibility:"visible"}).animate({opacity:1}):$(this).css("visibility","visible"),scrollPosSave=e)})}function refreshScreen(){var i=innerWinHeight+$(window).scrollTop();$(".images").each(function(){var e=parseInt($(this).css("top"),10);i>=e&&"NaN"!=e&&($(this).css("visibility","visible"),scrollPosSave=i)})}var requestResult="",hasColumns=-1,columns=0,names="",resize="",fadeIn="",columnHeight="";$.ajax({url:"php/Gallery.php",type:"post",data:{width:$(window).width(),galleryWidth:$(".popup-gallery").innerWidth()},cache:!1,beforeSend:function(){$(".ajax-loading").css("display","block")},success:function(i){{var e=$(window).width();$(window).height()}requestResult=i,columns=requestResult.numOfColumns,queries=requestResult.mediaQueries,names=requestResult.columnNames,resize=requestResult.resize,fadeIn=requestResult.fadeIn,columnHeight=requestResult.columnHeight,activeColumn=requestResult.activeColumn+"_Columns";for(var t=0;columns>t;t++)0==t?(buildColumn(names[t]),$(".ajax-loading").css("display","none"),refreshScreen()):e>=queries[t]&&(buildColumn(activeColumn),$(".ajax-loading").css("display","none"),refreshScreen())},error:function(i){console.log("Ajax Error: "+i)}});var tmpColumn=-1,imgId=0;$(function(){$(window).resize(function(){{var i=$(window).width();$(window).height()}if("yes"==resize){if(i<=queries[0])return buildColumn(names[0]),void refreshScreen();if(i>=queries[queries.length-1])return buildColumn(names[columns-1]),void refreshScreen();if(i>=queries[0])for(var e=0;columns-1>=e;e++)if(i<=queries[e])return buildColumn(names[e-1]),void refreshScreen()}})});var scrollPosSave=0,scrollEvents=0,innerWinHeight=$(window).innerHeight(),scrollHeight=innerWinHeight,isInit=!1,winWidth=$(window).innerWidth(),timeoutId=0;jQuery(document).ready(function(i){i(window).scroll(function(){var e=innerWinHeight+i(window).scrollTop();e>scrollPosSave&&(scrollEvents++,winWidth>631||0==isInit?(isInit=!0,refreshScreenOnScroll(100)):(631>winWidth||0==isInit)&&(scrollEvents=0,isInit=!0,refreshScreenOnScroll(30)),timeoutId&&clearTimeout(timeoutId),timeoutId=setTimeout(function(){addImgToColumn(names[tmpColumn],e),refreshScreenOnScroll(30)},50))})}),$(function(){$(window).resize(function(){winWidth=$(window).innerWidth()})});